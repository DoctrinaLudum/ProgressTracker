/* ==========================================================================
   1. LAYOUT GERAL
   ========================================================================== */

body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    /* background-color: #ffffff; */
}

main.container {
    flex: 1;
    padding-top: 0.5rem;
    padding-bottom: 1.5rem;
}

h2.text-success {
    margin-bottom: 0.8rem !important;
}

p.lead.text-muted {
    margin-bottom: 1.2rem !important;
}

h3.text-success {
    margin-bottom: 1rem !important;
}

.card-title { 
    margin-bottom: 0.5rem; 
}


/* ==========================================================================
  2. CABEÇALHO (Header)
  ========================================================================== */

.app-header {
    background-color: #f8f9fa;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
}

.app-header h1 {
    font-size: 1.5rem;
    margin-bottom: 0 !important;
}

/* ==========================================================================
  3. RODAPÉ (Footer)
  ========================================================================== */

.app-footer {
    font-size: 0.9em;
    background-color: #f8f9fa;
    color: #36393b;
}

.app-footer a {
    color: #36393b;
    text-decoration: underline;
}

.app-footer a:hover {
    color: #ffee00;
    text-decoration: none;
}

.app-footer .bi-heart-fill {
    vertical-align: baseline;
}

/* ==========================================================================
  4. ÁREA DE RESULTADOS E TABELAS (#results-area)
  ========================================================================== */

#results-area .table > tbody > tr > td,
#results-area .table > thead > tr > th {
    padding-top: 0.6rem;
    padding-bottom: 0.6rem;
    vertical-align: middle;
}

#results-area .card .table-responsive {
    border-radius: var(--bs-border-radius);
    overflow: hidden;
}

#results-area .table > thead.bg-success-subtle > tr > th {
    background-color: transparent;
    border-color: inherit;
}

/* ==========================================================================
  5. INDICADORES E ELEMENTOS ESPECÍFICOS
  ========================================================================== */

.na-indicator {
    cursor: help;
    color: #6c757d;
    font-style: italic;
}

.accumulation-indicator-star {
    cursor: help;
    color: #fd7e14;
    font-weight: bold;
    vertical-align: super;
    font-size: 0.8em;
    margin-left: 2px;
}

/* ==========================================================================
  6. ESTILOS DA LOJA SAZONAL (Exemplo de Seção)
  ========================================================================== */

.currency-sfl {
    color: #E83E8C;
    font-weight: bold;
}

.currency-ticket {
    color: #198754;
    font-weight: bold;
}

.currency-broken_pillar {
    color: #6c757d;
    font-weight: bold;
}

/* ==========================================================================
  7. ESTILOS DE DESTAQUE DOS ITENS USADOS NA PROJEÇÃO
  ========================================================================== */

.unlock-path-item {
    border: 2px solid #fd7e14;
    opacity: 0.85;
    box-shadow: 0 0 8px rgba(253, 126, 20, 0.5);
    background-color: #fff3e8;
}

.item-selectable.border-primary.shadow {
    border-color: #0d6efd !important;
    opacity: 1 !important;
    box-shadow: 0 0.5rem 1rem rgba(0, 123, 255, 0.15) !important;
    background-color: #ffffff !important;
}

.unlock-item-marker {
    cursor: pointer;
}

.item-card.marked-for-unlock {
    background-color: #e0f2f7 !important;
}

/* ==========================================================================
  8. ESTILOS PARA CARDS DE ATIVIDADES (Bounties, Chores, Deliveries)
  ========================================================================== */

.activity-card {
    background-color: #ffffff;
    border: 1px solid #e9ecef; /* Borda mais clara */
    border-radius: 0.3rem;    /* Raio de borda um pouco menor */
    box-shadow: 0 1px 2px rgba(0,0,0,0.05); /* Sombra mais sutil */
    display: flex;
    flex-direction: column;
    height: 100%; 
    transition: box-shadow 0.15s ease-in-out, transform 0.15s ease-in-out; /* Transição mais rápida */
    width: 100%;
    /* overflow: hidden; /* Removido para evitar cortar sombras ou tooltips que transbordem */
}

.activity-card:hover {
    box-shadow: 0 0.2rem 0.4rem rgba(0,0,0,0.08);
    transform: translateY(-1px); /* Elevação mais sutil */
}

.activity-card .card-header {
    padding: 0.4rem 0.6rem; /* Padding MENOR no header */
    font-size: 0.85rem;   /* Fonte MENOR no header */
    font-weight: 500;     
    border-bottom: 1px solid #f0f0f0; /* Linha separadora bem sutil */
    /* background-color: #f8f9fa; /* Fundo sutil para o header, se desejado */
}
.activity-card .card-header .badge {
    font-size: 0.65em; /* Badge MENOR */
    padding: 0.25em 0.4em;
}
.activity-card .card-header h5.activity-title {
     font-size: 1em; 
     margin-bottom: 0;
     font-weight: 600; /* Nome do NPC/Chore/Entrega um pouco mais forte */
}

.activity-card .card-body {
   padding: 0.6rem; /* Padding MENOR no corpo */
   display: flex;
   flex-direction: column;
   flex-grow: 1;
}

.activity-card .activity-icon-col { 
    flex: 0 0 40px; /* Largura MENOR para coluna de ícone/imagem do NPC */
    padding-right: 0.6rem; /* Espaço MENOR */
    /* ... (restante dos estilos de align/justify) ... */
}
.activity-card .activity-icon-col img {
    max-height: 40px; /* Imagem MENOR */
    /* ... (restante dos estilos da imagem) ... */
}
.activity-card .activity-icon-col .bi { 
    font-size: 1.8rem; /* Ícone placeholder MENOR */
}

.activity-card .activity-title { 
    font-size: 0.9rem; /* Harmonizar com header ou ser um pouco maior se no body */
    font-weight: 600;
    margin-bottom: 0.15rem; /* Margem MENOR */
    line-height: 1.2;
}
.activity-card .activity-description { 
    font-size: 0.75rem; /* Descrição MENOR */
    color: #6c757d;
    margin-bottom: 0.25rem; 
    line-height: 1.25;
}

.activity-card .activity-requirements strong,
.activity-card .activity-reward strong { /* Labels "Requer:" "Recompensa:" */
    font-size: 0.75rem; 
    margin-bottom: 0.1rem;
}
.activity-card .activity-requirements ul,
.activity-card .activity-reward p,
.activity-card .activity-reward div { 
    font-size: 0.75rem; /* Itens/valores MENORES */
    margin-bottom: 0.1rem !important; 
    line-height: 1.2;
}
.activity-card .activity-requirements ul li {
    padding: 0; /* Sem padding extra nos itens da lista */
}

.activity-card .activity-reward .reward-line {
    margin-bottom: 0.1rem !important; /* Margem mínima */
}
.activity-card .activity-reward .reward-line .bi,
.activity-card .activity-reward .reward-line img { /* Aplicar a img também */
    margin-right: 0.2rem;
    font-size: 0.9em; /* Ícone/imagem da recompensa menor */
    width: 14px; /* Para imagens de token */
    height: 14px;
}

.activity-card .alert.small { 
    font-size: 0.7rem !important;
    padding: 0.25rem 0.4rem !important;
    margin-top: 0.25rem !important;
    margin-bottom: 0.1rem !important;
}

.activity-card .historical-data-footer {
    font-size: 0.7rem; /* Footer bem pequeno */
    padding: 0.4rem 0.6rem; 
    margin: 0.5rem -0.6rem -0.6rem; /* Compensa padding do card-body */
    /* ... (restante dos estilos do footer) ... */
}
.activity-card .historical-data-footer p {
    margin-bottom: 0 !important; /* Sem margem no footer */
    line-height: 1.1;
}


/* --- Estilos Específicos para Bounties --- */
.bounties-grid {
    /* Se quiser mais bounties por linha, diminua o minmax aqui: */
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); /* Ex: 80px min */
    gap: 0.6rem; /* Gap menor */
}
.bounty-card { 
    /* Se quiser que as bounties sejam menos altas: */
    height: 110px; /* Altura MENOR */
    border-radius: 6px; /* Raio de borda menor */
    /* ... (demais estilos de bounty-card) ... */
}

.bounty-req-image { 
    width: 32px; /* Imagem MENOR */
    height: 32px;
    margin-bottom: 0.3rem; 
}
.bounty-card .bounty-req-name { 
    font-size: 0.7rem; /* Nome MENOR */
    font-weight: 500;   
    color: #343a40;     
    margin-bottom: 0.15rem; 
    line-height: 1.15;
    min-height: calc(2 * 1.15em); 
}
.bounty-reward { 
    font-size: 0.65rem; 
    font-weight: 600; 
}
.bounty-reward .bi,
.bounty-reward img { /* Aplicar a img também */
    vertical-align: baseline; /* Tentar alinhar melhor */
    font-size: 0.9em; /* Ícone/imagem da recompensa menor */
    width: 12px; /* Para imagens de token */
    height: 12px;
    margin-right: 0.15rem;
}


/* ==========================================================================
   9. ESTILOS DA ABA CALENDARIO (Potential Season Calendar)
   ========================================================================== */
/* ... (seus estilos de calendário permanecem os mesmos) ... */
.calendar-table th,
.calendar-table td {
    text-align: center; 
    vertical-align: middle; 
}
.calendar-table .calendar-date-col {
    white-space: nowrap; 
    text-align: left; 
    padding-left: 0.5rem !important; 
}
.calendar-table th.calendar-date-col { 
    text-align: left;
}
.calendar-table .calendar-purchases-col .badge {
    display: block; 
    margin-bottom: 0.25rem; 
    text-align: center; 
}
.calendar-table .calendar-purchases-col .badge:last-child {
    margin-bottom: 0; 
}
.calendar-table td:has(span.text-danger.d-block) { 
    padding-top: 0.25rem; 
    padding-bottom: 0.25rem;
}
.calendar-table td span.text-danger.d-block {
     margin-bottom: 0.25rem; 
}
.calendar-table td span.text-danger.d-block:last-child {
     margin-bottom: 0;
}
#potential-calendar-tab-pane .table-bordered th,
#potential-calendar-tab-pane .table-bordered td {
    border-color: #dee2e6; 
}
#potential-calendar-tab-pane .table thead.table-dark th {
    background-color: #212529; 
    border-color: #32383e; 
}
#potential-calendar-tab-pane .badge { 
    font-size: 0.7rem;    
    padding: 0.3em 0.55em; 
    font-weight: 500;     
}
#potential-calendar-tab-pane [data-bs-toggle="tooltip"] {
    cursor: help;
}
.calendar-table .calendar-buffs-col {
    min-width: 130px; 
    white-space: pre-wrap; 
    text-align: left; 
}
.calendar-table tr.week-even td {
    background-color: #d7f7de;
}
.calendar-table tr.week-odd td {
    background-color: #ffffff;
}
.calendar-table tr.week-even:hover td,
.calendar-table tr.week-odd:hover td {
    background-color: #e9ecef; 
}
.calendar-table tr.highlight-purchase-day.week-even td {
    background-color: #eef3f5; 
}
.calendar-table tr.highlight-purchase-day.week-odd td {
    background-color: #f0f8ff; 
}

/* ==========================================================================
   10. ESTILOS DE SUB-ABAS
   ========================================================================== */
/* ... (seus estilos de sub-abas permanecem os mesmos) ... */
#token-sources-main-tab-pane .nav-pills {
    background-color: #f8f9fa; 
    padding: 0.5rem;
    border-radius: 0.25rem;
    margin-bottom: 1rem !important; 
}
#token-sources-main-tab-pane .nav-pills .nav-link {
    color: #495057; 
    background-color: transparent;
    border: 1px solid transparent; 
    margin-right: 0.25rem;
    padding: 0.5rem 0.8rem; 
    font-size: 0.9em; 
}
#token-sources-main-tab-pane .nav-pills .nav-link.active {
    color: #fff; 
    background-color: #7fb1fcc5; 
    border-color: #0d6efd; 
}
#token-sources-main-tab-pane .nav-pills .nav-link:not(.active):hover {
    background-color: #e9ecef; 
    border-color: #dee2e6;
}
#token-sources-main-tab-pane .tab-content {
    padding-top: 1rem; 
}
#analysisTabs .nav-link.active {
    color: #fff; 
    background-color: #0d6efd; 
    border-color: #0d6efd #0d6efd #fff; 
}
#analysisTabs .nav-link {
    color: #0d6efd; 
}
#analysisTabs .nav-link:not(.active):hover {
    border-color: #e9ecef #e9ecef #dee2e6; 
    isolation: isolate; 
}

/* ==========================================================================
   11. ESTILOS BOTÃO VOLTAR AO TOPO
   ========================================================================== */
/* ... (seus estilos do botão voltar ao topo permanecem os mesmos) ... */
#scrollTopBtn {
    display: none; 
    position: fixed;
    bottom: 30px; 
    right: 30px;  
    z-index: 9999; 
    border: none;
    outline: none;
    background-color: rgba(13, 110, 253, 0.65); 
    color: white; 
    cursor: pointer;
    width: 50px;   
    height: 50px;  
    border-radius: 50%; 
    font-size: 24px;    
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); 
    transition: background-color 0.3s ease; 
    align-items: center;     
    justify-content: center; 
}
#scrollTopBtn:hover {
    background-color: #0d6efd; 
}

/* ==========================================================================
   12. ESTILOS PARA CARD DE IDENTIFICAÇÃO E STATS (ATUALIZADO)
   ========================================================================== */
/* ... (os estilos do card de identificação que ajustamos permanecem aqui) ... */
.farm-identification-card .card-body {
    padding: 0.75rem; 
}
.farm-identification-card .farm-name {
    font-size: 1.25rem; 
    font-weight: 600;
    margin-bottom: 0; 
    display: block; 
}
.farm-identification-card .farm-name .bi {
    font-size: 1.05rem; 
    vertical-align: baseline; 
    margin-right: 0.2rem;
}
.farm-identification-card .farm-details-line { 
    margin-bottom: 0.35rem; 
}
.farm-identification-card .farm-details-line small {
    font-size: 0.78em; 
    line-height: 1.1; 
}
.farm-identification-card .farm-details-line .badge {
    font-size: 0.72em; 
    padding: 0.15em 0.35em; 
    vertical-align: middle;
}
.farm-identification-card .farm-details-line i.bi {
    color: #6c757d;
    font-size: 0.85em; 
    vertical-align: middle;
}
.farm-identification-card .resource-row {
    margin-top: 0.1rem;  
    margin-bottom: 0.1rem; 
    line-height: 1.2; 
}
.farm-identification-card .resource-item {
    font-size: 0.88em; 
    padding-top: 0;    
    padding-bottom: 0; 
    padding-left: 0.2rem;  
    padding-right: 0.2rem;
    display: flex;
    align-items: center; 
    white-space: nowrap; 
    margin-bottom: 0.1rem; 
}
.farm-identification-card .resource-item i.bi {
    margin-right: 0.25rem; 
    font-size: 0.95em; 
    vertical-align: middle; 
}
.farm-identification-card .resource-item strong {
    font-weight: 500; 
}
.farm-identification-card .faction-details-line {
    margin-top: 0.25rem; 
}
.farm-identification-card .faction-details-line small {
    font-size: 0.82em; 
    line-height: 1.2; 
}
.farm-identification-card .faction-details-line i.bi {
    color: #6c757d; 
    font-size: 0.9em; 
    vertical-align: middle;
    margin-right: 0.2rem;
}
.farm-identification-card .faction-details-line strong {
    color: #343a40; 
    font-weight: 500;
}
.farm-identification-card .bumpkin-image {
    max-width: 90px; 
    height: auto;
    border-radius: 6px; 
    border: 1px solid #dee2e6; 
    background-color: #f8f9fa; 
}
.farm-identification-card .bumpkin-placeholder {
    width: 90px; 
    height: 90px; 
    background-color: #e9ecef;
    border: 1px solid #ced4da;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
}
.farm-identification-card .bumpkin-placeholder .bi {
    font-size: 2.5rem; 
    color: #adb5bd;
}
.farm-identification-card p { 
    margin-bottom: 0.15rem !important; 
}
.farm-identification-card h4 { 
    margin-bottom: 0 !important; 
}

@media (max-width: 767.98px) { 
    .farm-identification-card .bumpkin-image,
    .farm-identification-card .bumpkin-placeholder {
        margin-top: 0.3rem; 
        max-width: 80px; 
    }
     .farm-identification-card .bumpkin-placeholder {
        width: 80px; 
        height: 80px; 
    }
    .farm-identification-card .bumpkin-placeholder .bi {
        font-size: 2rem; 
    }
    .farm-identification-card .resource-item {
        font-size: 0.78em; 
        padding-top: 0;
        padding-bottom: 0;
        margin-bottom: 0.05rem;
    }
    .farm-identification-card .farm-name {
        font-size: 1.15rem; 
    }
    .farm-identification-card .farm-details-line small,
    .farm-identification-card .faction-details-line small {
        font-size: 0.75em; 
    }
}

/* ==========================================================================
   13. ESTILOS PARA CARDS DE ENTREGAS (SUB-ABA "FONTES DE TOKENS") - (JÁ FORNECIDO ANTERIORMENTE)
   ========================================================================== */
.delivery-npc-card .card-header .badge { /* Se você adicionar a classe delivery-npc-card ao card de entrega */
    font-size: 0.7em; 
    vertical-align: middle;
}

.delivery-npc-card .card-body strong[style*="font-size: 0.9rem"] { 
    color: #343a40; 
    font-weight: 500;
    display: block;
    margin-bottom: 0.2rem;
}

.delivery-npc-card .card-body ul.list-unstyled li {
    font-size: 0.8rem;
    color: #495057;
    padding: 0.1rem 0;
}
.delivery-npc-card .card-body ul.list-unstyled li .fw-normal { 
    color: #212529;
}

.delivery-npc-card .reward-line { 
    font-size: 0.85rem;
    margin-bottom: 0.25rem !important;
}
.delivery-npc-card .reward-line strong { 
    font-weight: 600;
}
.delivery-npc-card .reward-line .bi { 
    font-size: 1em; 
    margin-right: 0.25rem;
}
.delivery-npc-card .reward-line .text-muted { 
    font-size: 0.9em !important; 
    margin-left: 0.3rem;
}

.delivery-npc-card .alert-warning.small { 
    font-size: 0.75rem !important;
    padding: 0.4rem 0.6rem !important;
    margin-top: 0.4rem !important;
    margin-bottom: 0.2rem !important;
}
.delivery-npc-card .alert-warning.small .bi {
    vertical-align: text-bottom;
}

.delivery-npc-card .historical-data-footer { 
    font-size: 0.78rem;
    color: #6c757d;
    padding: 0.6rem 0.85rem 0.5rem; /* Ajustado para corresponder ao padding do .activity-card .card-header */
    margin: 0.75rem -0.85rem -0.85rem; /* Ajustado para compensar padding do .activity-card .card-body */
    background-color: #f8f9fa; 
    border-top: 1px solid #e9ecef;
    border-bottom-left-radius: calc(0.375rem - 1px); 
    border-bottom-right-radius: calc(0.375rem - 1px);
}
.delivery-npc-card .historical-data-footer p {
    margin-bottom: 0.05rem !important; 
    line-height: 1.2;
}