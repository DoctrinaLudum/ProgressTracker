<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <title>{% block title %}Progress Tracker{% endblock %}</title>

</head>
<body>

    <header class="app-header py-3 mb-0 border-bottom shadow-sm">
        <div class="container d-flex align-items-center">
            {# Link clicável envolvendo o título #}
            <a href="{{ url_for('index') }}" class="d-flex align-items-center text-success text-decoration-none"> {# Corrigido: Adicionado aspas de fechamento aqui #}
                <i class="bi bi-sun-fill me-2 fs-4"></i>
                <h1 class="text-success mb-0">Progress Tracker - Sunflower Land</h1>
            </a>
            {# <p class="text-muted small mb-0">Acompanhe seu progresso no jogo</p> #} {# Opcional: Tagline #}
        </div>
    </header>

    {# Adicionamos a classe 'main' para flexbox funcionar com o rodapé #}
    <main class="container mt-4 mb-5">
        {% block content %}
        {# O conteúdo do index.html (e outras páginas) será inserido aqui #}
        {% endblock %}
    </main>

    {# 'mt-auto' empurra o rodapé para baixo em páginas curtas (requer display:flex no body) #}
    {# Voltando a centralizar com text-center e removendo flexbox por enquanto #}
    <footer class="app-footer mt-auto py-3 border-top">
        <div class="container text-center"> {# Garante que text-center está aqui #}
    
            {# Modificado este parágrafo para incluir a versão #}
            <p class="mb-1 small">
                <span>&copy; {{ current_year }} Progress Tracker (v. {{ app_version }})</span> {# <--- VERSÃO AQUI #}
                 |
                <span>Dados via <a href="https://sunflower-land.com/" target="_blank" rel="noopener noreferrer">Sunflower Land API</a> & <a href="https://sfl.world/" target="_blank" rel="noopener noreferrer">Sunflower Land World</a></span>
                {# | <span><a href="..." target="_blank" rel="noopener noreferrer">Código Fonte</a></span> #}
            </p>
            <p class="small mb-1">
                Aviso: Estimativas de custo são baseadas em dados de mercado e podem variar. Este é um projeto não oficial.
            </p>
            <p class="small mb-0">
                Desenvolvido por <strong>Doctrina</strong> | Feito com <i class="bi bi-heart-fill text-danger"></i> para a comunidade Sunflower Land.
            </p>
        </div>
    </footer>

    {# --- HTML para o Botão Voltar ao Topo --- #}
    <button onclick="scrollToTop()" id="scrollTopBtn" title="Voltar ao topo">
        <i class="bi bi-arrow-up-circle-fill"></i>
    </button>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    {# ---- NOVO BLOCO PARA SCRIPTS DE PRÉ-CONFIGURAÇÃO ---- #}
    {# Este bloco será usado no index.html para definir variáveis globais ANTES de script.js #}
    {% block pre_main_scripts %}
    {% endblock %}
    {# ---------------------------------------------------- #}

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

    {# Bloco para scripts específicos da página que rodam DEPOIS do script.js principal #}
    {% block post_main_scripts %} 
    {% endblock %}
</body>
</html>